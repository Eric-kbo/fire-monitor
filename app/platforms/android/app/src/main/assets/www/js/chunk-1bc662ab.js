(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1bc662ab"],{"30d9":function(t,s,e){},6745:function(t,s,e){t.exports=e.p+"img/cylinders.png"},9041:function(t,s,e){"use strict";e.r(s);var i={data:()=>({date:(new Date).toISOString().slice(0,10),zoom:8,show:!1,list:[],current:0,currentMark:0,center:"长沙"}),watch:{current(t){this.$nextTick(()=>{this.center={lng:this.list[t].lng,lat:this.list[t].lat},setTimeout(()=>{console.log(this.list[t]),this.infoWindowOpen(t)},0)})}},mounted(){this.getData()},methods:{onReady({BMap:t,map:s}){this.getData()},async getData(){let t=await this.$chntek.transUnitList();this.list=t.map(t=>(console.log(t.id,t.longitude,t.latitude),{unit:t.location,id:t.id,hydraulic_pressure:t.hydraulic_pressure,temperature:t.temperature,energy:t.energy,signal_intensity:t.signal_intensity,time:t.time,longitude:t.longitude,latitude:t.latitude,lng:t.longitude&&t.longitude.slice(1),lat:t.latitude&&t.latitude.slice(1),type:t.type})),this.center=this.list[0]},infoWindowOpen(t){this.currentMark=t,this.show=!0},infoWindowClose(){this.show=!1},iconStyle(t){switch(t){case"pressure":return{url:e("abb9"),size:{width:32,height:32}};case"firehydrant":return{url:e("d26b"),size:{width:32,height:32}};case"cylinders":return{url:e("6745"),size:{width:32,height:32}}}}}},a=(e("abd0"),e("2877")),n=Object(a.a)(i,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"map-container"},[e("baidu-map",{staticClass:"map",attrs:{center:t.center,zoom:t.zoom},on:{ready:t.onReady}},[e("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT"}}),t._l(t.list,(function(s,i){return e("bm-marker",{key:i+"-",staticClass:"iconfont warn_type",attrs:{position:{lng:s.lng,lat:s.lat},dragging:!1,offset:{width:0,height:0},icon:t.iconStyle(s.type)},on:{click:function(s){return t.infoWindowOpen(i)}}})})),t._l(t.list,(function(s,i){return e("bm-info-window",{key:i,staticClass:"message-box",attrs:{show:t.show&&t.currentMark==i,width:220,closeOnClick:!0,autoPan:!0,offset:{width:0,height:-10},position:{lng:s.lng,lat:s.lat}},on:{close:t.infoWindowClose}},[e("p",{staticClass:"display-flex message"},[t._v(" 单位地点: "),e("span",{staticClass:"flex_1 overEllipsis"},[t._v(t._s(s.unit))])]),e("p",{staticClass:"display-flex message"},[t._v(" 设备编号: "),e("span",{staticClass:"flex_1"},[t._v(t._s(s.id))])]),e("p",{staticClass:"display-flex message"},[t._v(" 当前水压: "),e("span",{staticClass:"flex_1"},[t._v(t._s(s.hydraulic_pressure)+"Mpa")])]),e("p",{staticClass:"display-flex message"},[t._v(" 当前温度: "),e("span",{staticClass:"flex_1"},[t._v(t._s(s.temperature)+"°C")])]),e("p",{staticClass:"display-flex message"},[t._v(" 当前电量: "),e("span",{staticClass:"flex_1"},[t._v(t._s(s.energy)+"%")])]),e("p",{staticClass:"display-flex message"},[t._v(" 信号强度: "),e("span",{staticClass:"flex_1"},[t._v(t._s(s.signal_intensity)+"db")])]),e("p",{staticClass:"display-flex message"},[t._v(" 监测时间: "),e("span",{staticClass:"flex_1"},[t._v(t._s(s.time))])]),e("p",{staticClass:"display-flex message"},[t._v(" 经纬坐标: "),e("span",{staticClass:"flex_1"},[t._v(t._s(s.longitude.slice(0,7))+" "+t._s(s.latitude.slice(0,6)))])])])}))],2)],1)}),[],!1,null,"7f4ced97",null);s.default=n.exports},abb9:function(t,s,e){t.exports=e.p+"img/pressure.png"},abd0:function(t,s,e){"use strict";e("30d9")},d26b:function(t,s,e){t.exports=e.p+"img/firehydrant.png"}}]);