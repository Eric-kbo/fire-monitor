(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a230502"],{2994:function(t,e,a){"use strict";a("68ef"),a("e3b3"),a("c0c2")},"2bdd":function(t,e,a){"use strict";var n=a("d282"),i=a("02de"),o=a("a8c1"),s=a("5fbe"),r=a("543e"),c=Object(n["a"])("list"),l=c[0],d=c[1],u=c[2];e["a"]=l({mixins:[Object(s["a"])((function(t){this.scroller||(this.scroller=Object(o["d"])(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var e,a=t.$el,n=t.scroller,o=t.offset,s=t.direction;e=n.getBoundingClientRect?n.getBoundingClientRect():{top:0,bottom:n.innerHeight};var r=e.bottom-e.top;if(!r||Object(i["a"])(a))return!1;var c=!1,l=t.$refs.placeholder.getBoundingClientRect();c="up"===s?e.top-l.top<=o:l.bottom-e.bottom<=o,c&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{key:"loading",class:d("loading")},[this.slots("loading")||t(r["a"],{attrs:{size:"16"}},[this.loadingText||u("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var e=this.slots("finished")||this.finishedText;if(e)return t("div",{class:d("finished-text")},[e])}},genErrorText:function(){var t=this.$createElement;if(this.error){var e=this.slots("error")||this.errorText;if(e)return t("div",{on:{click:this.clickErrorText},class:d("error-text")},[e])}}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",key:"placeholder",class:d("placeholder")});return t("div",{class:d(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():e,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():e])}})},"75ad":function(t,e,a){},aa40:function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-bottom":"15%"}},[a("van-overlay",{staticStyle:{"z-index":"999999"},attrs:{show:t.overlayShow}},[a("div",{staticClass:"wrapper"},[a("van-loading",{attrs:{size:"24px",color:"#0094ff",vertical:""}},[t._v("数据量太大,正在加载中...")])],1)]),a("van-row",[a("van-grid",{attrs:{"column-num":3}},[a("van-grid-item",{attrs:{icon:"cluster",text:"总数："+t.allCount}}),a("van-grid-item",{attrs:{icon:"checked",text:"正常："+t.normalCount}}),a("van-grid-item",{attrs:{icon:"warning",text:"异常："+t.abNormalCount}})],1)],1),a("van-collapse",{attrs:{accordion:""},on:{change:t.getStatusDetail},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.statusList,(function(e,n){return[a("van-collapse-item",{key:n,attrs:{name:n},scopedSlots:t._u([{key:"title",fn:function(){return[a("van-row",[a("van-col",{attrs:{span:"12"}},[t._v(t._s(e.title.id))]),a("van-col",{attrs:{span:"4"}},[t._v(t._s(e.title.city))]),a("van-col",{attrs:{span:"8"}},[t._v(t._s(e.title.county))])],1),a("van-row",[a("van-col",{attrs:{span:"24"}},[t._v(t._s(e.title.location))])],1),a("van-row",[a("van-col",{attrs:{span:"24"}},[t._v(t._s(e.data.type))])],1),a("van-row",[a("van-col",{attrs:{span:"24"}},[t._v(t._s(e.data.time))])],1)]},proxy:!0}],null,!0)},[t._l(t.detailList,(function(e,n){return[a("van-cell-group",{key:n},[a("van-row",[a("van-col",{attrs:{span:"6"}},[t._v(" 温度: "),a("van-tag",{attrs:{plain:"",type:"primary"}},[t._v(t._s(e.temperature))])],1),a("van-col",{attrs:{span:"6"}},[t._v(" 压力: "),a("van-tag",{attrs:{plain:"",type:"success"}},[t._v(t._s(e.hydraulic_pressure))])],1),a("van-col",{attrs:{span:"6"}},[t._v(" 电量: "),a("van-tag",{attrs:{plain:"",type:"danger"}},[t._v(t._s(e.energy)+"%")])],1),a("van-col",{attrs:{span:"12"}},[t._v(" 时间: "),a("van-tag",{attrs:{plain:"",type:"warning"}},[t._v(t._s(e.time))])],1)],1),a("van-row",[t._v(" 信息: "),a("van-tag",{attrs:{plain:"",type:"danger"}},[t._v(t._s(e.type))])],1)],1)]}))],2)]}))],2)],1)],1)},o=[],s=(a("7db0"),a("4160"),a("d3b7"),a("25f0"),a("159b"),a("ade3")),r=(a("2994"),a("2bdd")),c=(a("68ef"),a("75ad"),a("d282")),l=a("ea8e"),d=a("b1d2"),u=a("9884"),h=Object(c["a"])("grid"),f=h[0],g=h[1],v=f({mixins:[Object(u["b"])("vanGrid")],props:{square:Boolean,gutter:[Number,String],iconSize:[Number,String],direction:String,clickable:Boolean,columnNum:{type:[Number,String],default:4},center:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},computed:{style:function(){var t=this.gutter;if(t)return{paddingLeft:Object(l["a"])(t)}}},render:function(){var t,e=arguments[0];return e("div",{style:this.style,class:[g(),(t={},t[d["e"]]=this.border&&!this.gutter,t)]},[this.slots()])}}),m=(a("9d70"),a("3743"),a("e15d"),a("c31d")),b=a("48f4"),p=a("6f2f"),y=a("ad06"),x=Object(c["a"])("grid-item"),j=x[0],O=x[1],k=j({mixins:[Object(u["a"])("vanGrid")],props:Object(m["a"])({},b["c"],{dot:Boolean,text:String,icon:String,iconPrefix:String,info:[Number,String],badge:[Number,String]}),computed:{style:function(){var t=this.parent,e=t.square,a=t.gutter,n=t.columnNum,i=100/n+"%",o={flexBasis:i};if(e)o.paddingTop=i;else if(a){var s=Object(l["a"])(a);o.paddingRight=s,this.index>=n&&(o.marginTop=s)}return o},contentStyle:function(){var t=this.parent,e=t.square,a=t.gutter;if(e&&a){var n=Object(l["a"])(a);return{right:n,bottom:n,height:"auto"}}}},methods:{onClick:function(t){this.$emit("click",t),Object(b["b"])(this.$router,this)},genIcon:function(){var t,e=this.$createElement,a=this.slots("icon"),n=null!=(t=this.badge)?t:this.info;return a?e("div",{class:O("icon-wrapper")},[a,e(p["a"],{attrs:{dot:this.dot,info:n}})]):this.icon?e(y["a"],{attrs:{name:this.icon,dot:this.dot,badge:n,size:this.parent.iconSize,classPrefix:this.iconPrefix},class:O("icon")}):void 0},getText:function(){var t=this.$createElement,e=this.slots("text");return e||(this.text?t("span",{class:O("text")},[this.text]):void 0)},genContent:function(){var t=this.slots();return t||[this.genIcon(),this.getText()]}},render:function(){var t,e=arguments[0],a=this.parent,n=a.center,i=a.border,o=a.square,s=a.gutter,r=a.direction,c=a.clickable;return e("div",{class:[O({square:o})],style:this.style},[e("div",{style:this.contentStyle,attrs:{role:c?"button":null,tabindex:c?0:null},class:[O("content",[r,{center:n,square:o,clickable:c,surround:i&&s}]),(t={},t[d["a"]]=i,t)],on:{click:this.onClick}},[this.genContent()])])}}),S=(a("f1dc"),a("6e47")),w=(a("ac1e"),a("543e")),_=(a("6d73"),a("473d")),C=(a("5f5f"),a("f253")),T=(a("9cb7"),a("66fd")),L=(a("66b9"),a("b650")),$=(a("5852"),a("d961")),N=(a("2b28"),a("9ed2")),B=(a("5f1a"),a("a3e2")),E=(a("342a"),a("1437")),D=(a("5d17"),a("f9bd")),q=(a("8a58"),a("e41f")),z=(a("be7f"),a("565f")),I=(a("46de"),a("a822")),P=(a("0653"),a("34e9")),R=(a("c194"),a("7744")),H=(a("c3a6"),a("81e6"),a("9ffb")),F=(a("4d48"),a("d1e1")),G=a("ed08"),J={components:(n={},Object(s["a"])(n,F["a"].name,F["a"]),Object(s["a"])(n,H["a"].name,H["a"]),Object(s["a"])(n,y["a"].name,y["a"]),Object(s["a"])(n,R["a"].name,R["a"]),Object(s["a"])(n,P["a"].name,P["a"]),Object(s["a"])(n,I["a"].name,I["a"]),Object(s["a"])(n,z["a"].name,z["a"]),Object(s["a"])(n,q["a"].name,q["a"]),Object(s["a"])(n,D["a"].name,D["a"]),Object(s["a"])(n,E["a"].name,E["a"]),Object(s["a"])(n,B["a"].name,B["a"]),Object(s["a"])(n,N["a"].name,N["a"]),Object(s["a"])(n,$["a"].name,$["a"]),Object(s["a"])(n,L["a"].name,L["a"]),Object(s["a"])(n,T["a"].name,T["a"]),Object(s["a"])(n,C["a"].name,C["a"]),Object(s["a"])(n,_["a"].name,_["a"]),Object(s["a"])(n,w["a"].name,w["a"]),Object(s["a"])(n,S["a"].name,S["a"]),Object(s["a"])(n,k.name,k),Object(s["a"])(n,v.name,v),Object(s["a"])(n,r["a"].name,r["a"]),n),data:function(){return{active:0,allCount:0,normalCount:0,abNormalCount:0,loading:!1,finished:!1,account:"",Arealoading:!0,activeNames:["1","2"],overlayShow:!1,starTime:"",endTime:"",statusList:[],detailList:[],allDevices:[],nowCheck:-1,cascaderValue:"",options:[],optionList:{}}},created:function(){this.account=localStorage.getItem("chntek-account");var t=new Date;this.starTime=Object(G["b"])(t,-1),this.endTime=Object(G["a"])(t),this.loadData()},methods:{onLoad:function(){var t=this;setTimeout((function(){t.starTime=Object(G["b"])(t.starTime,-1),t.allDevices.forEach((function(e){t.getHistoryStatus(e)})),t.loading=!1}),1e3)},loadData:function(){var t=this;this.$chntek.regions(this.account).then((function(e){var a=Object(G["c"])(e,[]);t.allCount=a.length,t.$chntek.statusPrimary(a.toString()).then((function(e){t.allDevices=e,a.forEach((function(a){t.getStatus(a,e)}))}))}))},getHistoryStatus:function(t){var e=this;this.$chntek.warrigs(t.id,this.starTime,1).then((function(a){t&&a&&a.length>0&&e.statusList.push({title:t,data:a[0]})}))},getStatus:function(t,e){var a=this;this.$chntek.warrigs(t,this.starTime,1).then((function(n){var i=e.find((function(e){return e.id===t}));i&&n&&n.length>0&&(a.statusList.push({title:i,data:n[0]}),localStorage.getItem("abnormalCount")!=a.statusList.length&&window.cordova.plugins.notification.local.schedule({text:"有新的告警信息...",foreground:!0}),a.abNormalCount=a.statusList.length,a.normalCount=a.allCount-a.abNormalCount,localStorage.setItem("abnormalCount",a.abNormalCount))}))},getStatusDetail:function(t){var e=this,a=this.statusList[t];this.statusList.forEach((function(n){n===a&&e.nowCheck!==t&&(e.detailList=[],e.nowCheck=t,e.overlayShow=!0,e.$chntek.warrigs(a.title.id,a.data.time.substring(0,10),20).then((function(t){e.detailList=t,e.overlayShow=!1})).catch((function(){e.overlayShow=!1})))}))},getPosition:function(t){return t?t.longitude+";"+t.latitude:""}}},A=J,V=(a("bb85"),a("2877")),K=Object(V["a"])(A,i,o,!1,null,null,null);e["default"]=K.exports},bb85:function(t,e,a){"use strict";a("eaa1")},c0c2:function(t,e,a){},e15d:function(t,e,a){},eaa1:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7a230502.bd2e683a.js.map