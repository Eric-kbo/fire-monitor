(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-61c7cdd9"],{"6ceb":function(s,t,e){"use strict";e("f3ab")},9041:function(s,t,e){"use strict";e.r(t);var a={data:()=>({date:(new Date).toISOString().slice(0,10),zoom:8,show:!1,list:[],current:0,currentMark:0,center:"长沙"}),watch:{current(s){this.$nextTick(()=>{this.center={lng:this.list[s].lng,lat:this.list[s].lat},setTimeout(()=>{console.log(this.list[s]),this.infoWindowOpen(s)},0)})}},mounted(){},methods:{onReady({BMap:s,map:t}){this.getData()},async getData(){this.date="2020-12-04";let s=await this.$chntek.devices.statusHistory("",this.date),t=Object.keys(s).filter(t=>s[t]!=[]&&s[t][0].longitude&&s[t][0].longitude);this.list=t.map(t=>({id:t,hydraulic_pressure:s[t][0].hydraulic_pressure,temperature:s[t][0].temperature,energy:s[t][0].energy,signal_intensity:s[t][0].signal_intensity,time:s[t][0].time,longitude:s[t][0].longitude,latitude:s[t][0].latitude,lng:s[t][0].longitude.slice(1),lat:s[t][0].latitude.slice(1)})),this.center=this.list[0]},infoWindowOpen(s){this.currentMark=s,this.show=!0},infoWindowClose(){this.show=!1}}},i=(e("6ceb"),e("2877")),l=Object(i.a)(a,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"map-container"},[e("baidu-map",{staticClass:"map",attrs:{center:s.center,zoom:s.zoom},on:{ready:s.onReady}},[e("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT"}}),s._l(s.list,(function(t,a){return e("bm-marker",{key:t.id,attrs:{position:{lng:t.lng,lat:t.lat},dragging:!1,offset:{width:0,height:0}},on:{click:function(t){return s.infoWindowOpen(a)}}})})),s._l(s.list,(function(t,a){return e("bm-info-window",{key:a,staticClass:"message-box",attrs:{show:s.show&&s.currentMark==a,width:220,closeOnClick:!0,autoPan:!0,offset:{width:0,height:0},position:{lng:t.lng,lat:t.lat}},on:{close:s.infoWindowClose}},[e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("设备编号:")]),s._v(" "+s._s(t.id)+" ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("当前水压:")]),s._v(" "+s._s(t.hydraulic_pressure)+"Mpa ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("当前温度:")]),s._v(" "+s._s(t.temperature)+"°C ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("当前电量:")]),s._v(" "+s._s(t.energy)+"% ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("信号强度:")]),s._v(" "+s._s(t.signal_intensity)+"db ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("监测日期:")]),s._v(" "+s._s(s.date)+" ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("监测时间:")]),s._v(" "+s._s(t.time)+" ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("坐标经度:")]),s._v(" "+s._s(t.longitude)+" ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[s._v("坐标纬度")]),s._v(" "+s._s(t.latitude)+" ")])])}))],2)],1)}),[],!1,null,"0df68dcb",null);t.default=l.exports},f3ab:function(s,t,e){}}]);