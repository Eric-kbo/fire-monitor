(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4d510c4e"],{"34d2":function(t,s,e){"use strict";e("f075")},9041:function(t,s,e){"use strict";e.r(s);var a={data:()=>({date:(new Date).toISOString().slice(0,10),zoom:8,show:!1,list:[],current:0,currentMark:0,center:"长沙"}),watch:{current(t){this.$nextTick(()=>{this.center={lng:this.list[t].lng,lat:this.list[t].lat},setTimeout(()=>{console.log(this.list[t]),this.infoWindowOpen(t)},0)})}},mounted(){},methods:{onReady({BMap:t,map:s}){this.getData()},async getData(){this.date="2020-12-04";let t=await this.$chntek.devices.statusHistory("",this.date),s=Object.keys(t).filter(s=>t[s]!=[]&&t[s][0].longitude&&t[s][0].longitude);this.list=s.map(s=>({id:s,hydraulic_pressure:t[s][0].hydraulic_pressure,temperature:t[s][0].temperature,energy:t[s][0].energy,time:t[s][0].time,longitude:t[s][0].longitude,latitude:t[s][0].latitude,lng:t[s][0].longitude.slice(1),lat:t[s][0].latitude.slice(1)})),this.center=this.list[0]},infoWindowOpen(t){this.currentMark=t,this.show=!0},infoWindowClose(){this.show=!1}}},i=(e("34d2"),e("2877")),l=Object(i.a)(a,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"map-container"},[e("baidu-map",{staticClass:"map",attrs:{center:t.center,zoom:t.zoom},on:{ready:t.onReady}},[e("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT"}}),t._l(t.list,(function(s,a){return e("bm-marker",{key:s.id,attrs:{position:{lng:s.lng,lat:s.lat},dragging:!1,offset:{width:0,height:0}},on:{click:function(s){return t.infoWindowOpen(a)}}})})),t._l(t.list,(function(s,a){return e("bm-info-window",{key:a,staticClass:"message-box",attrs:{show:t.show&&t.currentMark==a,width:220,closeOnClick:!0,offset:{width:0,height:0},position:{lng:s.lng,lat:s.lat}},on:{close:t.infoWindowClose}},[e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[t._v("设备编号:")]),t._v(" "+t._s(s.id)+" ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[t._v("当前水压:")]),t._v(" "+t._s(s.hydraulic_pressure)+"Kpa ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[t._v("当前温度:")]),t._v(" "+t._s(s.temperature)+"°C ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[t._v("当前电量:")]),t._v(" "+t._s(s.energy)+"% ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[t._v("监测时间:")]),t._v(" "+t._s(s.time)+" ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[t._v("坐标经度:")]),t._v(" "+t._s(s.longitude)+" ")]),e("p",{staticClass:"display-flex message"},[e("span",{staticClass:"flex_1"},[t._v("坐标纬度")]),t._v(" "+t._s(s.latitude)+" ")])])}))],2)],1)}),[],!1,null,"faf984fc",null);s.default=l.exports},f075:function(t,s,e){}}]);